<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Upgrade Guide | Laravel Nova</title>
    <meta name="description" content="Master Your Universe">
    <link rel="preload stylesheet" href="/docs/4.0/assets/style.40518fc7.css" as="style">
    <script type="module" src="/docs/4.0/assets/app.1e96c5f4.js"></script>
    <link rel="modulepreload" href="/docs/4.0/assets/chunks/framework.df2f533d.js">
  <link rel="modulepreload" href="/docs/4.0/assets/upgrade.md.9b01f6b5.lean.js">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><!--[--><header class="bg-white/80 dark:bg-gray-900/80 backdrop-blur border-b dark:border-gray-700 sticky top-0 z-50 w-full h-[3.3rem] flex-none"><div class="max-w-[90rem] px-4 sm:px-6 md:px-8 mx-auto h-[3.3rem]"><div class="flex items-center h-[3.3rem] gap-4"><button type="button" class="md:hidden text-gray-600 dark:text-gray-400"><span class="sr-only">Navigation</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="flex-shrink-0 w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg></button><!--[--><!----><div style="position:fixed;top:1;left:1;width:1;height:0;padding:0;margin:-1;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none;"></div><!--]--><!--[--><a href="/docs/4.0/" class="flex-shrink-0 h-[24px] text-gray-500 dark:text-white" alt="Laravel Nova"><img class="flex-shrink-0 h-[24px] text-gray-500 dark:text-white block dark:hidden" alt="logo" src="/docs/4.0/logo.svg"><img class="flex-shrink-0 h-[24px] text-gray-500 dark:text-white hidden dark:block" alt="logo" src="/docs/4.0/logo-dark.svg"></a><!--]--><div data-headlessui-state class="relative inline-block text-left"><div><button id="headlessui-menu-button-26" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state class="inline-flex w-full items-center justify-center gap-x-1.5 rounded-full bg-gray-100 dark:bg-gray-950 px-3 py-1 text-[13px] font-semibold text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-950/70">v4.0 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="text-gray-500 w-4 h-4 ml-2 -mr-1"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"></path></svg></button><!----></div></div><div class="ml-auto md:flex items-center md:divide-x md:divide-gray-200 md:dark:divide-gray-700"><div class="hidden md:flex items-center gap-12 px-6"><!--[--><a href="https://nova.laravel.com/docs" class="text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-primary-500">Docs</a><a href="https://nova.laravel.com" class="text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-primary-500">Releases</a><a href="https://laracasts.com/" class="text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-primary-500">Course</a><!--]--></div><div class="hidden md:flex md:items-center gap-6 pl-6"><div data-headlessui-state class="relative inline-block text-left"><div><button id="headlessui-menu-button-28" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state class="flex items-center text-gray-500 dark:text-gray-400"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="w-5 h-5 text-gray-500"><path d="M10 2a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 2zM10 15a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 15zM10 7a3 3 0 100 6 3 3 0 000-6zM15.657 5.404a.75.75 0 10-1.06-1.06l-1.061 1.06a.75.75 0 001.06 1.06l1.06-1.06zM6.464 14.596a.75.75 0 10-1.06-1.06l-1.06 1.06a.75.75 0 001.06 1.06l1.06-1.06zM18 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0118 10zM5 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 015 10zM14.596 15.657a.75.75 0 001.06-1.06l-1.06-1.061a.75.75 0 10-1.06 1.06l1.06 1.06zM5.404 6.464a.75.75 0 001.06-1.06l-1.06-1.06a.75.75 0 10-1.061 1.06l1.06 1.06z"></path></svg></button><!----></div></div><a href="https://github.com/laravel/nova-issues" class="text-gray-500 dark:text-gray-400"><svg class="w-5 fill-current" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="flex items-center gap-3 pl-6"><button type="button" class="md:hidden flex-shrink-0 text-gray-600 dark:text-gray-400"><span class="sr-only">Search</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg></button><button type="button" class="md:hidden flex-shrink-0 text-gray-600 dark:text-gray-400"><span class="sr-only">More</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"></path></svg></button><!--[--><!----><div style="position:fixed;top:1;left:1;width:1;height:0;padding:0;margin:-1;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none;"></div><!--]--></div></div></div></div></header><div class="relative"><!--[--><!--]--><div class="relative z-10 max-w-[90rem] mx-auto px-4 sm:px-6 md:px-8"><div class="hidden lg:block fixed z-20 inset-0 w-[19.5rem] top-[3.3rem] left-[max(0px,calc(50%-45rem))] right-auto px-8 pb-10 overflow-y-auto"><div class="sticky top-0 -ml-0.5"><div class="h-10 bg-gray-50 dark:bg-gray-900"></div><div class="LNSearch"><div id="docsearch"></div></div><div class="h-8 bg-gradient-to-b from-gray-50 dark:from-gray-900"></div></div><div class="sidebar"><nav class="flex flex-col gap-6"><!--[--><div><span class="text-gray-700 dark:text-gray-400 font-bold text-sm">Introduction</span><div class="mt-2"><!--[--><a href="/docs/4.0/installation" class="text-sm text-gray-500 hover:text-gray-600 border-l border-gray-300/50 dark:border-gray-800 flex items-start pl-4 py-1 hover:border-primary-500 dark:hover:border-gray-700">Installation</a><a href="/docs/4.0/short" class="text-sm text-gray-500 hover:text-gray-600 border-l border-gray-300/50 dark:border-gray-800 flex items-start pl-4 py-1 hover:border-primary-500 dark:hover:border-gray-700">Prev/Next Test</a><!--]--></div></div><div><span class="text-gray-700 dark:text-gray-400 font-bold text-sm">About</span><div class="mt-2"><!--[--><a href="/docs/4.0/upgrade" class="text-sm text-gray-500 hover:text-gray-600 border-l border-gray-300/50 dark:border-gray-800 flex items-start pl-4 py-1 hover:border-primary-500 dark:hover:border-gray-700 !text-primary-500 !border-primary-500">Upgrade Guide</a><!--]--></div></div><!--]--></nav></div></div><div class="lg:pl-[19.5rem]"><div class="antialiased max-w-3xl mx-auto pt-10 xl:max-w-none xl:ml-0 xl:mr-[15.5rem] xl:pr-16 pb-24"><div><div class="PilgrimDoc max-w-none content prose dark:prose-invert prose-headings:font-normal prose-h1:text-3xl prose-h2:mb-3 prose-ul:list-none prose-ul:px-0 prose-li:pl-6 prose-img:rounded-lg prose-img:shadow prose-pre:bg-inherit prose-pre:p-6 prose-a:font-bold prose-a:no-underline prose-a:border-b hover:prose-a:border-b-2 prose-a:border-primary-500/50"><div style="position:relative;"><div><h1 id="upgrade-guide" tabindex="-1">Upgrade Guide <a class="header-anchor" href="#upgrade-guide" aria-label="Permalink to &quot;Upgrade Guide&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#dependency-upgrades">Dependency Upgrades</a><ul><li><a href="#updating-composer-dependencies">Updating Composer Dependencies</a></li><li><a href="#updating-configuration-assets-and-translations">Updating Configuration, Assets, and Translations</a></li><li><a href="#registering-a-nova-license-key-and-production-url">Registering a Nova license key and production URL</a></li><li><a href="#updating-third-party-nova-packages">Updating Third-Party Nova Packages</a></li></ul></li><li><a href="#high-impact-changes">High Impact Changes</a><ul><li><a href="#nova-request">Nova Request</a></li><li><a href="#main-dashboard-class">Main Dashboard Class</a></li><li><a href="#dashboard-methods">Dashboard Methods</a></li><li><a href="#client-side-timezone-detection">Client-Side Timezone Detection</a></li><li><a href="#date-datetime-fields-html5">Date / DateTime Fields &amp; HTML5</a></li><li><a href="#algolia-place-field">Algolia Place Field</a></li></ul></li><li><a href="#medium-impact-changes">Medium Impact Changes</a><ul><li><a href="#updating-custom-tool-cards-fields-filters">Updating Custom Tool, Cards, Fields, Filters</a></li><li><a href="#event-cancellation-on-save">Event Cancellation On Save</a></li><li><a href="#field-default-method-only-applies-to-create-attach-action-requests">Field::default Method Only Applies To Create, Attach, &amp; Action Requests</a></li><li><a href="#relationship-name-conventions">Relationship Name Conventions</a></li><li><a href="#action-actionclass-method-removed">Action::actionClass Method Removed</a></li></ul></li><li><a href="#low-impact-changes">Low Impact Changes</a><ul><li><a href="#eloquent-user-provider-required">Eloquent User Provider Required</a></li><li><a href="#reduce-encoded-filter-string-length">Reduce Encoded Filter String Length</a></li><li><a href="#action-showontablerow-method">Action::showOnTableRow Method</a></li><li><a href="#authorization-precedence">Authorization Precedence</a></li><li><a href="#update-published-stubs">Update Published Stubs</a></li></ul></li></ul></nav><h2 id="dependency-upgrades" tabindex="-1">Dependency Upgrades <a class="header-anchor" href="#dependency-upgrades" aria-label="Permalink to &quot;Dependency Upgrades&quot;">​</a></h2><p>Nova&#39;s upstream dependencies have been upgraded. You will find a complete list of our dependency upgrades below:</p><h4 id="server" tabindex="-1">Server <a class="header-anchor" href="#server" aria-label="Permalink to &quot;Server&quot;">​</a></h4><ul><li>PHP 7.3+</li><li>Laravel Framework 8.0+</li><li>Updated <code>doctrine/dbal</code> from <code>^2.9</code> to <code>^2.13.3|^3.1.2</code></li><li>Updated <code>laravel/ui</code> from <code>^2.0|^3.0</code> to <code>^3.3</code></li><li>Updated <code>symfony/*</code> from <code>^5.0</code> to <code>^5.4|^6.0</code></li><li>Removed <code>cakephp/chronos</code> and <code>moontoast/math</code> dependencies</li></ul><h4 id="client" tabindex="-1">Client <a class="header-anchor" href="#client" aria-label="Permalink to &quot;Client&quot;">​</a></h4><ul><li>Updated supported Laravel Mix version from <code>v1</code> to <code>v6</code></li><li>Removed <code>flatpickr</code> and <code>moment.js</code></li></ul><h3 id="updating-composer-dependencies" tabindex="-1">Updating Composer Dependencies <a class="header-anchor" href="#updating-composer-dependencies" aria-label="Permalink to &quot;Updating Composer Dependencies&quot;">​</a></h3><p>You should update your <code>laravel/nova</code> dependency to <code>^4.0</code> in your application&#39;s <code>composer.json</code> file:</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-string-expression);">&quot;laravel/nova&quot;</span><span style="color:var(--shiki-color-text);">: </span><span style="color:var(--shiki-token-string-expression);">&quot;^4.0&quot;</span><span style="color:var(--shiki-color-text);">,</span></span></code></pre></div><p>After purchasing a Nova 4.0 license, you should update your <a href="https://getcomposer.org/doc/articles/http-basic-authentication.md" target="_blank" rel="noreferrer">Composer auth.json file</a> to use your newly generated license key instead of your previous Nova 3 API token or account password.</p><p>Next, install your updated your Composer dependencies:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-function);">composer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">update</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">mirrors</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-function);">composer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">update</span></span></code></pre></div><p>After updating your application&#39;s Composer dependencies, you should migrate your database:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-function);">php</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">artisan</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">migrate</span></span></code></pre></div><h3 id="updating-configuration-assets-and-translations" tabindex="-1">Updating Configuration, Assets, and Translations <a class="header-anchor" href="#updating-configuration-assets-and-translations" aria-label="Permalink to &quot;Updating Configuration, Assets, and Translations&quot;">​</a></h3><p>Next, you should update your application&#39;s Nova configuration, assets, and translation files. To get started, you may run the following commands to update your assets and translations.</p><p><strong>You may wish to store a copy of your current translation file before running this command so you can easily port any custom translations back into the new file after running these commands.</strong> In addition, we will generate a &quot;Main&quot; dashboard for your Nova installation:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-function);">php</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">artisan</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">nova:dashboard</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">Main</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-function);">php</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">-r</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;file_exists(&#39;./resources/views/vendor/nova/layout.blade.php&#39;) &amp;&amp; unlink(&#39;./resources/views/vendor/nova/layout.blade.php&#39;);&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-function);">php</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">artisan</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">vendor:publish</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">--tag=nova-assets</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">--force</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">php</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">artisan</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">vendor:publish</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">--tag=nova-lang</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">--force</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">php</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">artisan</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">view:clear</span></span></code></pre></div><p>Next, let&#39;s update the Nova configuration file. First, ensure that the <code>middleware</code> and <code>api_middleware</code> configuration options within your application&#39;s <code>nova</code> configuration file appear as follows:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">use</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Laravel</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Http</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Middleware</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Authenticate</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">use</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Laravel</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Http</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Middleware</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Authorize</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">use</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Laravel</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Http</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Middleware</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">BootTools</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">use</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Laravel</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Http</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Middleware</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">DispatchServingNovaEvent</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">use</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Laravel</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Http</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Middleware</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">HandleInertiaRequests</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> [</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-string-expression);">&#39;middleware&#39;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> [</span></span>
<span class="line"><span style="color:var(--shiki-token-string-expression);">&#39;web&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">HandleInertiaRequests</span><span style="color:var(--shiki-token-keyword);">::class</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">DispatchServingNovaEvent</span><span style="color:var(--shiki-token-keyword);">::class</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">BootTools</span><span style="color:var(--shiki-token-keyword);">::class</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">]</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-string-expression);">&#39;api_middleware&#39;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> [</span></span>
<span class="line"><span style="color:var(--shiki-token-string-expression);">&#39;nova&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">Authenticate</span><span style="color:var(--shiki-token-keyword);">::class</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">Authorize</span><span style="color:var(--shiki-token-keyword);">::class</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">]</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// ...</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">];</span></span></code></pre></div><p>Next, ensure your application&#39;s <code>nova</code> configuration file contains a <code>storage_disk</code> configuration option:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-string-expression);">&#39;storage_disk&#39;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">env</span><span style="color:var(--shiki-token-punctuation);">(</span><span style="color:var(--shiki-token-string-expression);">&#39;NOVA_STORAGE_DISK&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-token-function);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;public&#39;</span><span style="color:var(--shiki-token-punctuation);">),</span></span></code></pre></div><p>Once your configuration has been updated, you should review the following list of changes and upgrade your application accordingly.</p><h3 id="registering-a-nova-license-key-and-production-url" tabindex="-1">Registering a Nova license key and production URL <a class="header-anchor" href="#registering-a-nova-license-key-and-production-url" aria-label="Permalink to &quot;Registering a Nova license key and production URL&quot;">​</a></h3><p>Nova requires a license key a production URL to be used in production environments. Nova will check your license key and the current host against the values from the license details found in your Nova account.</p><h3 id="updating-third-party-nova-packages" tabindex="-1">Updating Third-Party Nova Packages <a class="header-anchor" href="#updating-third-party-nova-packages" aria-label="Permalink to &quot;Updating Third-Party Nova Packages&quot;">​</a></h3><p>If your application relies on Nova tools or packages developed by third-parties, it is possible that these packages are not yet compatible with Nova 4.0 and will require an update from their maintainers.</p><h2 id="high-impact-changes" tabindex="-1">High Impact Changes <a class="header-anchor" href="#high-impact-changes" aria-label="Permalink to &quot;High Impact Changes&quot;">​</a></h2><h3 id="nova-request" tabindex="-1">Nova Request <a class="header-anchor" href="#nova-request" aria-label="Permalink to &quot;Nova Request&quot;">​</a></h3><p>Nova 4 updates a variety of methods to accept a <code>Laravel\Nova\Http\Requests\NovaRequest</code> instance instead of an <code>Illuminate\Http\Request</code> instance. An overview of the methods that have been updated is provided below so you may update your method signatures accordingly.</p><h4 id="resources" tabindex="-1">Resources <a class="header-anchor" href="#resources" aria-label="Permalink to &quot;Resources&quot;">​</a></h4><p>The <code>fields</code>, <code>fieldsForIndex</code>, <code>fieldsForDetail</code>, <code>fieldsForCreate</code>, <code>fieldsForUpdate</code>, <code>cards</code>, <code>filters</code>, <code>lenses</code>, and <code>actions</code> methods:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Resource</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">{</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">fields</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">fieldsForIndex</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">fieldsForDetail</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">fieldsForCreate</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">fieldsForUpdate</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">cards</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">filters</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">lenses</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">actions</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div><h4 id="lenses" tabindex="-1">Lenses <a class="header-anchor" href="#lenses" aria-label="Permalink to &quot;Lenses&quot;">​</a></h4><p>The <code>fields</code>, <code>filters</code>, and <code>actions</code> methods:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Lens</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">{</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">fields</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">cards</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">filters</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">actions</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div><h4 id="actions" tabindex="-1">Actions <a class="header-anchor" href="#actions" aria-label="Permalink to &quot;Actions&quot;">​</a></h4><p>The <code>fields</code> method:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Action</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">{</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">fields</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div><h4 id="filters" tabindex="-1">Filters <a class="header-anchor" href="#filters" aria-label="Permalink to &quot;Filters&quot;">​</a></h4><p>The <code>apply</code> and <code>options</code> methods:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Filter</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">{</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">apply</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> $query</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> $value) {}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">options</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">NovaRequest</span><span style="color:var(--shiki-color-text);"> $request) {}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div><h3 id="main-dashboard-class" tabindex="-1">Main Dashboard Class <a class="header-anchor" href="#main-dashboard-class" aria-label="Permalink to &quot;Main Dashboard Class&quot;">​</a></h3><p>In previous releases of Nova, the &quot;Main&quot; dashboard cards were defined via the <code>cards</code> method of your application&#39;s <code>NovaServiceProvider</code>. However, in Nova 4, a dedicated <code>Main</code> dashboard class must be created via the following command:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-function);">php</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">artisan</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">nova:dashboard</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">Main</span></span></code></pre></div><p>Next, move the contents of the <code>cards</code> method from your <code>NovaServiceProvider</code> to the <code>cards</code> method of your new <code>App\Nova\Dashboards\Main</code> class and register the <code>Main</code> dashboard within the <code>dashboards</code> method of your <code>NovaServiceProvider</code>:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">use</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">App</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Dashboards</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Main</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* Get the extra dashboards that should be displayed on the Nova dashboard.</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">*</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* </span><span style="color:var(--shiki-token-keyword);">@return</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-keyword);">array</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">protected</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">dashboards</span><span style="color:var(--shiki-color-text);">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">{</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> [</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Main</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">];</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div><h3 id="dashboard-methods" tabindex="-1">Dashboard Methods <a class="header-anchor" href="#dashboard-methods" aria-label="Permalink to &quot;Dashboard Methods&quot;">​</a></h3><p>In Nova 4, the <code>label</code> and <code>uriKey</code> methods defined on dashboard classes are no longer static. You should update your methods accordingly:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-comment);">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* Get the displayable name of the dashboard.</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">*</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* </span><span style="color:var(--shiki-token-keyword);">@return</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-keyword);">string</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">label</span><span style="color:var(--shiki-color-text);">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">{</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;Post Stats&#39;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* Get the URI key for the dashboard.</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">*</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* </span><span style="color:var(--shiki-token-keyword);">@return</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-keyword);">string</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">public</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">uriKey</span><span style="color:var(--shiki-color-text);">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">{</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;posts-dashboard&#39;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div><h3 id="client-side-timezone-detection" tabindex="-1">Client-Side Timezone Detection <a class="header-anchor" href="#client-side-timezone-detection" aria-label="Permalink to &quot;Client-Side Timezone Detection&quot;">​</a></h3><p>Nova 4 removes the ability to rely on the client machine timezone in order to display timezone related information. Instead, Nova 4 utilizes the application&#39;s &quot;server side&quot; timezone as defined by the timezone option in your application&#39;s <code>app</code> configuration file.</p><h3 id="date-datetime-fields-html5" tabindex="-1"><code>Date</code> / <code>DateTime</code> Fields &amp; HTML5 <a class="header-anchor" href="#date-datetime-fields-html5" aria-label="Permalink to &quot;`Date` / `DateTime` Fields &amp; HTML5&quot;">​</a></h3><p>Nova 4 utilizes native <code>&lt;input type=&quot;date&quot; /&gt;</code> and <code>&lt;input type=&quot;datetime-local&quot; /&gt;</code> elements to render the <code>Date</code> and <code>DateTime</code> fields. Therefore, the following methods have been removed from Nova 4:</p><ul><li><code>firstDayOfWeek()</code></li><li><code>format()</code></li><li><code>pickerFormat()</code></li><li><code>pickerDisplayFormat()</code></li><li><code>incrementPickerHourBy()</code></li><li><code>incrementPickerMinuteBy()</code></li></ul><h3 id="algolia-place-field" tabindex="-1">Algolia Place Field <a class="header-anchor" href="#algolia-place-field" aria-label="Permalink to &quot;Algolia Place Field&quot;">​</a></h3><p>Unfortunately, Algolia is <a href="https://www.algolia.com/blog/product/sunsetting-our-places-feature/" target="_blank" rel="noreferrer">retiring their &quot;Places&quot; API</a> on May 31, 2022; therefore, the <code>Place</code> field has been deprecated and we encourage you to migrate to <code>Text</code> fields for street addresses and cities.</p><h2 id="medium-impact-changes" tabindex="-1">Medium Impact Changes <a class="header-anchor" href="#medium-impact-changes" aria-label="Permalink to &quot;Medium Impact Changes&quot;">​</a></h2><h3 id="updating-custom-tool-cards-fields-filters" tabindex="-1">Updating Custom Tool, Cards, Fields, Filters <a class="header-anchor" href="#updating-custom-tool-cards-fields-filters" aria-label="Permalink to &quot;Updating Custom Tool, Cards, Fields, Filters&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">Prerequisites</p><p>To ease upgrading custom packages to Nova 4, please review and copy the following files from Laravel Nova&#39;s <code>src/Console/tool-stubs</code> directory to your own custom package:</p><ul><li><code>nova.mix.js</code></li><li><code>package.json</code></li><li><code>webpack.mix.js</code></li></ul></div><p>Since Nova 4 upgrades our frontend dependencies to Inertia, Vue 3, and Tailwind 2, it is necessary to review all custom tools and upgrade them accordingly. A general overview of the necessary changes can be found below; however, your custom Nova packages may require additional changes if they are depending on third-party packages that only support Vue 2 or prior versions of Tailwind.</p><h4 id="vue-3" tabindex="-1">Vue 3 <a class="header-anchor" href="#vue-3" aria-label="Permalink to &quot;Vue 3&quot;">​</a></h4><p><strong>This change primarily affects the installation of custom tools that utilize Vue routing.</strong></p><p>Nova 4 has been updated to use Vue 3, in order to upgrade all custom cards, custom fields, custom filters, resource tools, and tools to support Vue 3, please make the following changes to your application&#39;s <code>webpack.mix.js</code>:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-comment);">// Before...</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">mix</span><span style="color:var(--shiki-token-function);">.js</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;resources/js/field.js&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;js&quot;</span><span style="color:var(--shiki-color-text);">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// After...</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">require</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;./nova.mix&quot;</span><span style="color:var(--shiki-color-text);">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-color-text);">mix</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">.setPublicPath</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&#39;dist&#39;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">.js</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&#39;resources/js/tool.js&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;js&#39;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">.vue</span><span style="color:var(--shiki-color-text);">({ version</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">3</span><span style="color:var(--shiki-color-text);"> })</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">.css</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&#39;resources/css/tool.css&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;css&#39;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">.nova</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&#39;vendor/package&#39;</span><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div><h4 id="replacing-vue-router-with-inertia-js" tabindex="-1">Replacing Vue Router With Inertia.js <a class="header-anchor" href="#replacing-vue-router-with-inertia-js" aria-label="Permalink to &quot;Replacing Vue Router With Inertia.js&quot;">​</a></h4><p><strong>This change primarily affects the installation of custom tools that utilize Vue routing.</strong></p><p>Nova 4 has replaced Vue router with <a href="https://inertiajs.com" target="_blank" rel="noreferrer">Inertia.js</a>. Therefore, custom tools should migrate from registering Vue routes to registering Inertia.js page components and backend routes. For example, given the following Nova 3 Vue router registration:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-comment);">// Within tool.js...</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-function);">.booting</span><span style="color:var(--shiki-color-text);">((Vue</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> router) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">router</span><span style="color:var(--shiki-token-function);">.addRoutes</span><span style="color:var(--shiki-color-text);">([</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">{</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">name</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;sidebar-tool&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">path</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;/sidebar-tool&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">component</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">require</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;./components/Tool&quot;</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">]);</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">});</span></span></code></pre></div><p>When using Nova 4, you should register the tool component with Inertia like so:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-comment);">// Within tool.js...</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-function);">.booting</span><span style="color:var(--shiki-color-text);">((Vue) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-function);">.inertia</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;SidebarTool&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">require</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;./component/Tool&quot;</span><span style="color:var(--shiki-color-text);">).default);</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">});</span></span></code></pre></div><p>Once your Vue component has been registered, you should define a server-side route definition for your tool so that it may be rendered:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-comment);">// Within ToolServiceProvider.php...</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">use</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Laravel</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-constant);">Nova</span><span style="color:var(--shiki-token-keyword);">::</span><span style="color:var(--shiki-token-function);">router</span><span style="color:var(--shiki-token-punctuation);">()</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">-&gt;</span><span style="color:var(--shiki-token-function);">group</span><span style="color:var(--shiki-token-punctuation);">(</span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> ($router) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">$router</span><span style="color:var(--shiki-token-keyword);">-&gt;</span><span style="color:var(--shiki-token-function);">get</span><span style="color:var(--shiki-token-punctuation);">(</span><span style="color:var(--shiki-token-string-expression);">&#39;sidebar-tool&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> ($request) {</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">inertia</span><span style="color:var(--shiki-token-punctuation);">(</span><span style="color:var(--shiki-token-string-expression);">&#39;SidebarTool&#39;</span><span style="color:var(--shiki-token-punctuation);">)</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span><span style="color:var(--shiki-token-punctuation);">)</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span><span style="color:var(--shiki-token-punctuation);">)</span><span style="color:var(--shiki-color-text);">;</span></span></code></pre></div><h4 id="removal-of-laravel-nova-npm-dependency" tabindex="-1">Removal Of <code>laravel-nova</code> NPM Dependency <a class="header-anchor" href="#removal-of-laravel-nova-npm-dependency" aria-label="Permalink to &quot;Removal Of `laravel-nova` NPM Dependency&quot;">​</a></h4><p><strong>This change primarily affects the installation of custom tools that utilize Vue routing.</strong></p><div class="tip custom-block"><p class="custom-block-title">Prerequisite</p><p>To ease upgrading custom packages to support Nova 4, please review and copy the following files from Laravel Nova&#39;s <code>src/Console/stubs</code> especially the following files:</p><ul><li><code>nova.mix.js</code></li><li><code>packages.json</code></li><li><code>webpack.mix.js</code></li></ul></div><p>Previous versions of Nova required the <code>laravel-nova</code> NPM package. In 4.0, this is no longer the case as each mixin has been integrated into Nova itself. To upgrade any custom packages you&#39;ve created, you must update your <code>webpack.mix.js</code> file to define an alias to <code>vendor/laravel/nova/resources/js/mixins/packages.js</code>:</p><p>Typically, custom Nova tools, resource tools, cards, and other custom packages that are being developed within a <code>nova-components</code> directory of a Laravel application can reference Nova&#39;s own <code>packages.js</code> file by defining a <code>laravel-nova</code> alias that points to the file within the Nova installation that is located within your root application&#39;s <code>vendor</code> directory. This alias is typically defined within the custom package&#39;s <code>nova.mix.js</code> file:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-string-expression);">&#39;laravel-nova&#39;</span><span style="color:var(--shiki-color-text);">: </span><span style="color:var(--shiki-token-constant);">path</span><span style="color:var(--shiki-token-function);">.join</span><span style="color:var(--shiki-color-text);">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">__dirname</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-token-string-expression);">&#39;../../vendor/laravel/nova/resources/js/mixins/packages.js&#39;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-punctuation);">,</span></span></code></pre></div><p>Custom Nova packages that are developed outside of a <code>nova-components</code> directory should declare <code>laravel/nova</code> as a &quot;dev&quot; Composer dependency, and then define a <code>laravel-nova</code> Mix alias that points to the <code>packages.js</code> file within your custom package&#39;s <code>vendor</code> directory:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-string-expression);">&#39;laravel-nova&#39;</span><span style="color:var(--shiki-color-text);">: </span><span style="color:var(--shiki-token-constant);">path</span><span style="color:var(--shiki-token-function);">.join</span><span style="color:var(--shiki-color-text);">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">__dirname</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-token-string-expression);">&#39;vendor/laravel/nova/resources/js/mixins/packages.js&#39;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-punctuation);">,</span></span></code></pre></div><p>In order to compile custom packages assets with <code>laravel-nova</code> mixins you are required to prepare <code>laravel/nova</code>&#39;s <code>node_modules</code> by running the following command:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-function);">npm</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">run</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">nova:install</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);"># Or use the explicit command...</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">npm</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">--prefix=</span><span style="color:var(--shiki-token-string-expression);">&#39;vendor/laravel/nova&#39;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">ci</span></span></code></pre></div><h3 id="event-cancellation-on-save" tabindex="-1">Event Cancellation On Save <a class="header-anchor" href="#event-cancellation-on-save" aria-label="Permalink to &quot;Event Cancellation On Save&quot;">​</a></h3><p>Nova 3 ignores event cancellation when creating or updating a resource. For example, the following code will still persist the <code>User</code> resource to the database, even though the even listener returns <code>false</code>:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-constant);">User</span><span style="color:var(--shiki-token-keyword);">::</span><span style="color:var(--shiki-token-function);">updating</span><span style="color:var(--shiki-token-punctuation);">(</span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> ($model) {</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">false</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span><span style="color:var(--shiki-token-punctuation);">)</span><span style="color:var(--shiki-color-text);">;</span></span></code></pre></div><p>However, this code will throw a <code>Laravel\Nova\Exceptions\ResourceSaveCancelledException</code> exception in Nova 4.</p><h3 id="field-default-method-only-applies-to-create-attach-action-requests" tabindex="-1"><code>Field::default</code> Method Only Applies To Create, Attach, &amp; Action Requests <a class="header-anchor" href="#field-default-method-only-applies-to-create-attach-action-requests" aria-label="Permalink to &quot;`Field::default` Method Only Applies To Create, Attach, &amp; Action Requests&quot;">​</a></h3><p>Nova 4 will no longer resolve default values for &quot;index&quot; and &quot;detail&quot; requests. If you need to define a model&#39;s default attribute values, please utilize Eloquent&#39;s <code>$attributes</code> property:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">use</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Illuminate</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Database</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Eloquent</span><span style="color:var(--shiki-token-punctuation);">\</span><span style="color:var(--shiki-token-constant);">Model</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">User</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">extends</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Model</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">{</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* The model&#39;s attributes.</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">*</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* </span><span style="color:var(--shiki-token-keyword);">@var</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-keyword);">array</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">protected</span><span style="color:var(--shiki-color-text);"> $attributes </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> [</span></span>
<span class="line"><span style="color:var(--shiki-token-string-expression);">&#39;timezone&#39;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;UTC&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">];</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div><h3 id="relationship-name-conventions" tabindex="-1">Relationship Name Conventions <a class="header-anchor" href="#relationship-name-conventions" aria-label="Permalink to &quot;Relationship Name Conventions&quot;">​</a></h3><p>Given the following field definition, Nova 3 will assume the relationship method is named <code>purchased_books</code>; however, Nova 4 will correctly assume the relationship method is named <code>purchasedBooks</code>.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-constant);">BelongsToMany</span><span style="color:var(--shiki-token-keyword);">::</span><span style="color:var(--shiki-token-function);">make</span><span style="color:var(--shiki-token-punctuation);">(</span><span style="color:var(--shiki-token-string-expression);">&#39;Purchased Books&#39;</span><span style="color:var(--shiki-token-punctuation);">),</span></span></code></pre></div><h3 id="action-actionclass-method-removed" tabindex="-1"><code>Action::actionClass</code> Method Removed <a class="header-anchor" href="#action-actionclass-method-removed" aria-label="Permalink to &quot;`Action::actionClass` Method Removed&quot;">​</a></h3><p>Nova 4 no longer allows adding custom CSS styles to an action confirmation modal&#39;s buttons via the action&#39;s <code>actionClass</code> method.</p><h2 id="low-impact-changes" tabindex="-1">Low Impact Changes <a class="header-anchor" href="#low-impact-changes" aria-label="Permalink to &quot;Low Impact Changes&quot;">​</a></h2><h3 id="eloquent-user-provider-required" tabindex="-1">Eloquent User Provider Required <a class="header-anchor" href="#eloquent-user-provider-required" aria-label="Permalink to &quot;Eloquent User Provider Required&quot;">​</a></h3><p>Nova 4 requires the authentication user provider to be <code>eloquent</code> in order to resolve information regarding the currently authenticated user.</p><p>In your application&#39;s default <code>config/auth.php</code> configuration file, the Eloquent user provider is specified and it is instructed to use the <code>App\Models\User</code> model when retrieving users. You may change these values within your configuration file based on the needs of your application.</p><h3 id="reduce-encoded-filter-string-length" tabindex="-1">Reduce Encoded Filter String Length <a class="header-anchor" href="#reduce-encoded-filter-string-length" aria-label="Permalink to &quot;Reduce Encoded Filter String Length&quot;">​</a></h3><p>Nova 4 introduces a shorter key-value map in filter string URLs which reduces the overall length of the URL. This change doesn&#39;t affect bookmarked URLs; however, third party package tool developers who interact deeply with Vuex may wish to ensure their packages still work after this change.</p><h3 id="action-showontablerow-method" tabindex="-1"><code>Action::showOnTableRow</code> Method <a class="header-anchor" href="#action-showontablerow-method" aria-label="Permalink to &quot;`Action::showOnTableRow` Method&quot;">​</a></h3><p>The <code>Action::showOnTableRow</code> method has been deprecated. Instead, we suggest updating your code to use the <code>showInline</code> method:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-comment);">// Before...</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ConsolidateTransaction</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-keyword);">-&gt;</span><span style="color:var(--shiki-token-function);">showOnTableRow</span><span style="color:var(--shiki-token-punctuation);">(),</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// After...</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ConsolidateTransaction</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-keyword);">-&gt;</span><span style="color:var(--shiki-token-function);">showInline</span><span style="color:var(--shiki-token-punctuation);">(),</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ConsolidateTransaction</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-keyword);">-&gt;</span><span style="color:var(--shiki-token-function);">onlyInline</span><span style="color:var(--shiki-token-punctuation);">(),</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ConsolidateTransaction</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-keyword);">-&gt;</span><span style="color:var(--shiki-token-function);">exceptInline</span><span style="color:var(--shiki-token-punctuation);">(),</span></span></code></pre></div><h3 id="authorization-precedence" tabindex="-1">Authorization Precedence <a class="header-anchor" href="#authorization-precedence" aria-label="Permalink to &quot;Authorization Precedence&quot;">​</a></h3><p>Nova 4 introduce the following tweaks to authorization order / precedence:</p><ul><li>Authorizing if a user can <code>view</code> a resource no longer depends on the <code>viewAny</code> permission.</li><li>Actions can be executed regardless of <code>view</code> and <code>viewAny</code> permissions.</li><li>Destructive actions will now authorize via their own <code>canRun</code> method before falling back to the model&#39;s policy.</li></ul><h3 id="update-published-stubs" tabindex="-1">Update Published Stubs <a class="header-anchor" href="#update-published-stubs" aria-label="Permalink to &quot;Update Published Stubs&quot;">​</a></h3><p>Due to various changes in Nova 4.0, you should re-publish the Nova &quot;stubs&quot; if you have previously published them. You can accomplish this by executing the <code>nova:stubs</code> Artisan command with the <code>--force</code> option:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-function);">php</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">artisan</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">nova:stubs</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string);">--force</span></span></code></pre></div></div></div></div><footer class="divide-y divide-gray-200 dark:divide-gray-700"><div class="gap-6 flex justify-between py-6"><a class="font-semibold group flex items-center text-base space-x-2" href="/docs/4.0/short"><span class="text-gray-500 group-hover:text-gray-600"><!--[-->←<!--]--></span><span class="text-sm text-gray-500 group-hover:text-gray-700"><!--[--> Prev/Next Test<!--]--></span><span class="text-gray-500 group-hover:text-gray-600"><!--[--><!--]--></span></a><!----></div><p class="text-center pt-6"><a href="https://github.com/davidhemphill/pilgrim-theme/edit/main/playground/upgrade.md" class="text-xs text-gray-500 hover:text-gray-700 dark:text-gray-500 dark:hover:text-gray-300">Edit this page on GitHub</a></p></footer><div class="fixed z-20 top-[3.3rem] bottom-0 right-[max(0px,calc(50%-45rem))] w-[19.5rem] py-10 overflow-y-auto hidden xl:block"><!----></div></div></div></div></div></div><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"short.md\":\"2d2c7648\",\"index.md\":\"c8267594\",\"installation.md\":\"3ed63496\",\"upgrade.md\":\"9b01f6b5\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Laravel Nova\",\"description\":\"Master Your Universe\",\"base\":\"/docs/4.0/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":{\"light\":\"/logo.svg\",\"dark\":\"/logo-dark.svg\"},\"nav\":[{\"text\":\"Docs\",\"link\":\"https://nova.laravel.com/docs\"},{\"text\":\"Releases\",\"link\":\"https://nova.laravel.com\"},{\"text\":\"Course\",\"link\":\"https://laracasts.com/\"}],\"githubUrl\":\"https://github.com/laravel/nova-issues\",\"editLink\":{\"pattern\":\"https://github.com/davidhemphill/pilgrim-theme/edit/main/playground/:path\",\"text\":\"Edit this page on GitHub\"},\"showVersionPicker\":true,\"versions\":[{\"text\":\"v4.0\",\"link\":\"https://nova.laravel.com/docs/4.0\",\"current\":true},{\"text\":\"v2.0\",\"link\":\"/docs/2.0\"}],\"sidebar\":[{\"text\":\"Introduction\",\"items\":[{\"text\":\"Installation\",\"link\":\"/installation\"},{\"text\":\"Prev/Next Test\",\"link\":\"/short\"}]},{\"text\":\"About\",\"items\":[{\"text\":\"Upgrade Guide\",\"link\":\"/upgrade\"}]}],\"search\":{\"provider\":\"local\"},\"algolia\":{\"indexName\":\"laravel_nova\",\"appId\":\"FGRCZANQVY\",\"apiKey\":\"7c0aaf326992f08ed7bfc461a1b61ef3\",\"placeholder\":\"Search Nova Docs...\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>